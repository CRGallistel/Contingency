% TSdisplay DISPLAYS 2-COL TSDATA WITH EVENT CODE NAMES AND LINE NUMBERS%   This function takes TSdata and displays it in the command window with%   additional columns containing row #'s and the event code names, which%   are found using the currently loaded event code set. %%   Example output:	%   Row #:		Time:		Event:		Codename:% %	    1:		   963		   112		StartTrial2%	    2:		   963		    81		  WNoiseOn%	    3:		   963		    42		  LightOn2%	    4:		   965		    32		  LightOff2%	    5:		   970		  1011		  PokeOn1%	    6:		   971		  1001		  PokeOff1%	    7:		   972		  1011		  PokeOn1%       ...        ...        ...       ...%%   The function will automatically indent the codenames for readabillity.%   Whenever a codename is encountered that contains the word "Start" the%   indent will be increased, whenever the word "End" is encountered it%   will be decreased.function TSdisplay(tsdata)codes = TSdeclareeventcodes;names = fieldnames(codes);vals = struct2cell(codes);vals = [vals{:}];indentnum = 0;disp(' ');disp(' ');disp(sprintf('\tRow #:\t\tTime:\t\tEvent:\t\tCodename:'));disp(' ');for x = 1:length(tsdata)    idx = find(vals == tsdata(x,2), 1);    if isempty(idx)        str = '-';    else        str = names{idx};    end    if indentnum > 0 && ~isempty(strfind(str, 'End'));        indentnum = indentnum - 1;    end        num0 = '     ';    num1 = '      ';    num2 = '      ';    strnum0 = int2str(x);    strnum1 = int2str(tsdata(x,1));    strnum2 = int2str(tsdata(x,2));        if numel(num0) < numel(strnum0)        num0 = strnum0;    else        num0((end-numel(strnum0)+1):end) = strnum0;    end        if numel(num1) < numel(strnum1)        num1 = strnum1;    else        num1((end-numel(strnum1)+1):end) = strnum1;    end    if numel(num2) < numel(strnum2)        num2 = strnum2;    else        num2((end-numel(strnum2)+1):end) = strnum2;    end        disp(sprintf('\t%s:\t\t%s\t\t%s\t\t%s%s', num0, num1, num2, repmat('  ', 1, indentnum), str));    if ~isempty(strfind(str, 'Start'))        indentnum = indentnum + 1;    end    enddisp(' ');