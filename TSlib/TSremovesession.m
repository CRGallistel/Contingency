% TSREMOVESESSION Removes a single session from the Experiment Structure%   TSremovesession ( SUBJECT, SESSION )%       Subject - A subject ID number from the Experiment.Subjects array%       Session - An integer index to Experiment.Subject(subject).Session,%                 or a date string.%%   This function will remove sessions that were added erroneously. It will%   remove the appropriate session from the session structure array,%   decrease that subject's NumSessions count, and recalculate the start%   and end dates for the Experiment. It will NOT remove the Session File%   from the FilesLoaded record in Experiment.Info, so to reload this%   Session, you will have to turn on overwrite mode by setting the%   Experiment.Info.OverWriteMode to true.function [ result ] = TSremovesession( Id, ses )result=0;if evalin('base','isempty(who(''global'',''Experiment''))')  % Verifies that an Experiment structure exists    error('There is no experiment structure');    result=0;    return;end;global Experimentif ~any(Experiment.Subjects == Id)    error('Subject %d was not found.', Id);endsub = find(Experiment.Subjects == Id,1);if ischar(ses)    [tf, loc] = ismember(ses, {Experiment.Subject(sub).Date});    if ~tf        error('Session with date %s in Subject %d was not found.', ses, Id);    end    ses = loc;endMatlabStartDate = Experiment.Subject(sub).Session(ses).MatlabStartDate;Experiment.Subject(sub).Session(ses) = [];Experiment.Subject(sub).NumSessions = length(Experiment.Subject(sub).Session);warning('Session %d has been removed from subject %d, but its Data file is still in Experiment.Info.FilesLoaded.\nTo add it again later, you will have to turn on overwrite mode.', ses, Id);% Recompute Experiment Start and End dates.datenums = [];for s = 1:Experiment.NumSubjects    datenums = [datenums Experiment.Subject(s).Session.MatlabStartDate];endExperiment.StartDate = datestr(min(datenums), 1);datenums = [];for s = 1:Experiment.NumSubjects    datenums = [datenums Experiment.Subject(s).Session.MatlabEndDate];endExperiment.EndDate = datestr(max(datenums), 1);result = 1;